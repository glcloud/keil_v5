REG=
{
GCR_PDID=1342177280,
GCR_RSTSRC=1342177284,
GCR_IPRSTC1=1342177288,
GCR_IPRSTC2=1342177292,
GCR_IPRSTC3=1342177296,
GCR_BODCR=1342177304,
GCR_TEMPCR=1342177308,
GCR_PORCR=1342177316,
GCR_GPA_MFP=1342177328,
GCR_GPB_MFP=1342177332,
GCR_GPC_MFP=1342177336,
GCR_GPD_MFP=1342177340,
GCR_GPE_MFP=1342177344,
GCR_GPF_MFP=1342177348,
GCR_ALT_MFP=1342177360,
GCR_ALT_MFP1=1342177368,
GCR_ALT_MFP2=1342177372,
GCR_IRCTRIMCTL=1342177408,
GCR_IRCTRIMIEN=1342177412,
GCR_IRCTRIMINT=1342177416,
GCR_HIRCTCTL=1342177424,
GCR_HIRCTIEN=1342177428,
GCR_HIRCTSTS=1342177432,
GCR_REGWRPROT=1342177536,
SYST_SYST_CSR=3758153744,
SYST_SYST_RVR=3758153748,
SYST_SYST_CVR=3758153752,
NVIC_NVIC_ISER=3758153984,
NVIC_NVIC_ICER=3758154112,
NVIC_NVIC_ISPR=3758154240,
NVIC_NVIC_ICPR=3758154368,
NVIC_NVIC_IPR0=3758154752,
NVIC_NVIC_IPR1=3758154756,
NVIC_NVIC_IPR2=3758154760,
NVIC_NVIC_IPR3=3758154764,
NVIC_NVIC_IPR4=3758154768,
NVIC_NVIC_IPR5=3758154772,
NVIC_NVIC_IPR6=3758154776,
NVIC_NVIC_IPR7=3758154780,
INT_IRQ0_SRC=1342178048,
INT_IRQ1_SRC=1342178052,
INT_IRQ2_SRC=1342178056,
INT_IRQ3_SRC=1342178060,
INT_IRQ4_SRC=1342178064,
INT_IRQ5_SRC=1342178068,
INT_IRQ6_SRC=1342178072,
INT_IRQ7_SRC=1342178076,
INT_IRQ8_SRC=1342178080,
INT_IRQ9_SRC=1342178084,
INT_IRQ10_SRC=1342178088,
INT_IRQ11_SRC=1342178092,
INT_IRQ12_SRC=1342178096,
INT_IRQ13_SRC=1342178100,
INT_IRQ14_SRC=1342178104,
INT_IRQ15_SRC=1342178108,
INT_IRQ16_SRC=1342178112,
INT_IRQ17_SRC=1342178116,
INT_IRQ18_SRC=1342178120,
INT_IRQ19_SRC=1342178124,
INT_IRQ20_SRC=1342178128,
INT_IRQ21_SRC=1342178132,
INT_IRQ22_SRC=1342178136,
INT_IRQ23_SRC=1342178140,
INT_IRQ24_SRC=1342178144,
INT_IRQ25_SRC=1342178148,
INT_IRQ26_SRC=1342178152,
INT_IRQ27_SRC=1342178156,
INT_IRQ28_SRC=1342178160,
INT_IRQ29_SRC=1342178164,
INT_IRQ30_SRC=1342178168,
INT_IRQ31_SRC=1342178172,
INT_NMI_SEL=1342178176,
INT_MCU_IRQ=1342178180,
SCS_CPUID=3758157056,
SCS_ICSR=3758157060,
SCS_AIRCR=3758157068,
SCS_SCR=3758157072,
SCS_SHPR2=3758157084,
SCS_SHPR3=3758157088,
CLK_PWRCON=1342177792,
CLK_AHBCLK=1342177796,
CLK_APBCLK=1342177800,
CLK_CLKSTATUS=1342177804,
CLK_CLKSEL0=1342177808,
CLK_CLKSEL1=1342177812,
CLK_CLKDIV=1342177816,
CLK_CLKSEL2=1342177820,
CLK_PLLCON=1342177824,
CLK_FRQDIV=1342177828,
CLK_APBCLK1=1342177840,
CLK_CLKSEL3=1342177844,
CLK_CLKDIV1=1342177848,
USB_USB_INTEN=1074135040,
USB_USB_INTSTS=1074135044,
USB_USB_FADDR=1074135048,
USB_USB_EPSTS=1074135052,
USB_USB_ATTR=1074135056,
USB_USB_FLDET=1074135060,
USB_USB_STBUFSEG=1074135064,
USB_USB_BUFSEG0=1074135072,
USB_USB_MXPLD0=1074135076,
USB_USB_CFG0=1074135080,
USB_USB_CFGP0=1074135084,
USB_USB_BUFSEG1=1074135088,
USB_USB_MXPLD1=1074135092,
USB_USB_CFG1=1074135096,
USB_USB_CFGP1=1074135100,
USB_USB_BUFSEG2=1074135104,
USB_USB_MXPLD2=1074135108,
USB_USB_CFG2=1074135112,
USB_USB_CFGP2=1074135116,
USB_USB_BUFSEG3=1074135120,
USB_USB_MXPLD3=1074135124,
USB_USB_CFG3=1074135128,
USB_USB_CFGP3=1074135132,
USB_USB_BUFSEG4=1074135136,
USB_USB_MXPLD4=1074135140,
USB_USB_CFG4=1074135144,
USB_USB_CFGP4=1074135148,
USB_USB_BUFSEG5=1074135152,
USB_USB_MXPLD5=1074135156,
USB_USB_CFG5=1074135160,
USB_USB_CFGP5=1074135164,
USB_USB_DRVSE0=1074135184,
GPIO_GPIOA_PMD=1342193664,
GPIO_GPIOA_OFFD=1342193668,
GPIO_GPIOA_DOUT=1342193672,
GPIO_GPIOA_DMASK=1342193676,
GPIO_GPIOA_PIN=1342193680,
GPIO_GPIOA_DBEN=1342193684,
GPIO_GPIOA_IMD=1342193688,
GPIO_GPIOA_IEN=1342193692,
GPIO_GPIOA_ISRC=1342193696,
GPIO_GPIOB_PMD=1342193728,
GPIO_GPIOB_OFFD=1342193732,
GPIO_GPIOB_DOUT=1342193736,
GPIO_GPIOB_DMASK=1342193740,
GPIO_GPIOB_PIN=1342193744,
GPIO_GPIOB_DBEN=1342193748,
GPIO_GPIOB_IMD=1342193752,
GPIO_GPIOB_IEN=1342193756,
GPIO_GPIOB_ISRC=1342193760,
GPIO_GPIOC_PMD=1342193792,
GPIO_GPIOC_OFFD=1342193796,
GPIO_GPIOC_DOUT=1342193800,
GPIO_GPIOC_DMASK=1342193804,
GPIO_GPIOC_PIN=1342193808,
GPIO_GPIOC_DBEN=1342193812,
GPIO_GPIOC_IMD=1342193816,
GPIO_GPIOC_IEN=1342193820,
GPIO_GPIOC_ISRC=1342193824,
GPIO_GPIOD_PMD=1342193856,
GPIO_GPIOD_OFFD=1342193860,
GPIO_GPIOD_DOUT=1342193864,
GPIO_GPIOD_DMASK=1342193868,
GPIO_GPIOD_PIN=1342193872,
GPIO_GPIOD_DBEN=1342193876,
GPIO_GPIOD_IMD=1342193880,
GPIO_GPIOD_IEN=1342193884,
GPIO_GPIOD_ISRC=1342193888,
GPIO_GPIOE_PMD=1342193920,
GPIO_GPIOE_OFFD=1342193924,
GPIO_GPIOE_DOUT=1342193928,
GPIO_GPIOE_DMASK=1342193932,
GPIO_GPIOE_PIN=1342193936,
GPIO_GPIOE_DBEN=1342193940,
GPIO_GPIOE_IMD=1342193944,
GPIO_GPIOE_IEN=1342193948,
GPIO_GPIOE_ISRC=1342193952,
GPIO_GPIOF_PMD=1342193984,
GPIO_GPIOF_OFFD=1342193988,
GPIO_GPIOF_DOUT=1342193992,
GPIO_GPIOF_DMASK=1342193996,
GPIO_GPIOF_PIN=1342194000,
GPIO_GPIOF_DBEN=1342194004,
GPIO_GPIOF_IMD=1342194008,
GPIO_GPIOF_IEN=1342194012,
GPIO_GPIOF_ISRC=1342194016,
GPIO_DBNCECON=1342194048,
GPIO_PA0_PDIO=1342194176,
GPIO_PA1_PDIO=1342194180,
GPIO_PA2_PDIO=1342194184,
GPIO_PA3_PDIO=1342194188,
GPIO_PA4_PDIO=1342194192,
GPIO_PA5_PDIO=1342194196,
GPIO_PA6_PDIO=1342194200,
GPIO_PA7_PDIO=1342194204,
GPIO_PA8_PDIO=1342194208,
GPIO_PA9_PDIO=1342194212,
GPIO_PA10_PDIO=1342194216,
GPIO_PA11_PDIO=1342194220,
GPIO_PA12_PDIO=1342194224,
GPIO_PA13_PDIO=1342194228,
GPIO_PA14_PDIO=1342194232,
GPIO_PA15_PDIO=1342194236,
GPIO_PB0_PDIO=1342194240,
GPIO_PB1_PDIO=1342194244,
GPIO_PB2_PDIO=1342194248,
GPIO_PB3_PDIO=1342194252,
GPIO_PB4_PDIO=1342194256,
GPIO_PB5_PDIO=1342194260,
GPIO_PB6_PDIO=1342194264,
GPIO_PB7_PDIO=1342194268,
GPIO_PB8_PDIO=1342194272,
GPIO_PB9_PDIO=1342194276,
GPIO_PB10_PDIO=1342194280,
GPIO_PB11_PDIO=1342194284,
GPIO_PB12_PDIO=1342194288,
GPIO_PB13_PDIO=1342194292,
GPIO_PB14_PDIO=1342194296,
GPIO_PB15_PDIO=1342194300,
GPIO_PC0_PDIO=1342194304,
GPIO_PC1_PDIO=1342194308,
GPIO_PC2_PDIO=1342194312,
GPIO_PC3_PDIO=1342194316,
GPIO_PC4_PDIO=1342194320,
GPIO_PC5_PDIO=1342194324,
GPIO_PC6_PDIO=1342194328,
GPIO_PC7_PDIO=1342194332,
GPIO_PC8_PDIO=1342194336,
GPIO_PC9_PDIO=1342194340,
GPIO_PC10_PDIO=1342194344,
GPIO_PC11_PDIO=1342194348,
GPIO_PC12_PDIO=1342194352,
GPIO_PC13_PDIO=1342194356,
GPIO_PC14_PDIO=1342194360,
GPIO_PC15_PDIO=1342194364,
GPIO_PD0_PDIO=1342194368,
GPIO_PD1_PDIO=1342194372,
GPIO_PD2_PDIO=1342194376,
GPIO_PD3_PDIO=1342194380,
GPIO_PD4_PDIO=1342194384,
GPIO_PD5_PDIO=1342194388,
GPIO_PD6_PDIO=1342194392,
GPIO_PD7_PDIO=1342194396,
GPIO_PD8_PDIO=1342194400,
GPIO_PD9_PDIO=1342194404,
GPIO_PD10_PDIO=1342194408,
GPIO_PD11_PDIO=1342194412,
GPIO_PD12_PDIO=1342194416,
GPIO_PD13_PDIO=1342194420,
GPIO_PD14_PDIO=1342194424,
GPIO_PD15_PDIO=1342194428,
GPIO_PE0_PDIO=1342194432,
GPIO_PE1_PDIO=1342194436,
GPIO_PE2_PDIO=1342194440,
GPIO_PE3_PDIO=1342194444,
GPIO_PE4_PDIO=1342194448,
GPIO_PE5_PDIO=1342194452,
GPIO_PE6_PDIO=1342194456,
GPIO_PE7_PDIO=1342194460,
GPIO_PE8_PDIO=1342194464,
GPIO_PE9_PDIO=1342194468,
GPIO_PE10_PDIO=1342194472,
GPIO_PE11_PDIO=1342194476,
GPIO_PE12_PDIO=1342194480,
GPIO_PE13_PDIO=1342194484,
GPIO_PE14_PDIO=1342194488,
GPIO_PE15_PDIO=1342194492,
GPIO_PF0_PDIO=1342194496,
GPIO_PF1_PDIO=1342194500,
GPIO_PF2_PDIO=1342194504,
GPIO_PF3_PDIO=1342194508,
I2C0_I2CON=1073872896,
I2C0_I2CADDR0=1073872900,
I2C0_I2CDAT=1073872904,
I2C0_I2CSTATUS=1073872908,
I2C0_I2CLK=1073872912,
I2C0_I2CTOC=1073872916,
I2C0_I2CADDR1=1073872920,
I2C0_I2CADDR2=1073872924,
I2C0_I2CADDR3=1073872928,
I2C0_I2CADM0=1073872932,
I2C0_I2CADM1=1073872936,
I2C0_I2CADM2=1073872940,
I2C0_I2CADM3=1073872944,
I2C0_I2CWKUPCON=1073872956,
I2C0_I2CWKUPSTS=1073872960,
I2C1_I2CON=1074921472,
I2C1_I2CADDR0=1074921476,
I2C1_I2CDAT=1074921480,
I2C1_I2CSTATUS=1074921484,
I2C1_I2CLK=1074921488,
I2C1_I2CTOC=1074921492,
I2C1_I2CADDR1=1074921496,
I2C1_I2CADDR2=1074921500,
I2C1_I2CADDR3=1074921504,
I2C1_I2CADM0=1074921508,
I2C1_I2CADM1=1074921512,
I2C1_I2CADM2=1074921516,
I2C1_I2CADM3=1074921520,
I2C1_I2CWKUPCON=1074921532,
I2C1_I2CWKUPSTS=1074921536,
PWMA_PPR=1074003968,
PWMA_CSR=1074003972,
PWMA_PCR=1074003976,
PWMA_CNR0=1074003980,
PWMA_CMR0=1074003984,
PWMA_PDR0=1074003988,
PWMA_CNR1=1074003992,
PWMA_CMR1=1074003996,
PWMA_PDR1=1074004000,
PWMA_CNR2=1074004004,
PWMA_CMR2=1074004008,
PWMA_PDR2=1074004012,
PWMA_CNR3=1074004016,
PWMA_CMR3=1074004020,
PWMA_PDR3=1074004024,
PWMA_PBCR=1074004028,
PWMA_PIER=1074004032,
PWMA_PIIR=1074004036,
PWMA_CCR0=1074004048,
PWMA_CCR2=1074004052,
PWMA_CRLR0=1074004056,
PWMA_CFLR0=1074004060,
PWMA_CRLR1=1074004064,
PWMA_CFLR1=1074004068,
PWMA_CRLR2=1074004072,
PWMA_CFLR2=1074004076,
PWMA_CRLR3=1074004080,
PWMA_CFLR3=1074004084,
PWMA_CAPENR=1074004088,
PWMA_POE=1074004092,
PWMA_TCON=1074004096,
PWMA_TSTATUS=1074004100,
PWMA_SYNCBUSY0=1074004104,
PWMA_SYNCBUSY1=1074004108,
PWMA_SYNCBUSY2=1074004112,
PWMA_SYNCBUSY3=1074004116,
PWMB_PPR=1075052544,
PWMB_CSR=1075052548,
PWMB_PCR=1075052552,
PWMB_CNR0=1075052556,
PWMB_CMR0=1075052560,
PWMB_PDR0=1075052564,
PWMB_CNR1=1075052568,
PWMB_CMR1=1075052572,
PWMB_PDR1=1075052576,
PWMB_CNR2=1075052580,
PWMB_CMR2=1075052584,
PWMB_PDR2=1075052588,
PWMB_CNR3=1075052592,
PWMB_CMR3=1075052596,
PWMB_PDR3=1075052600,
PWMB_PBCR=1075052604,
PWMB_PIER=1075052608,
PWMB_PIIR=1075052612,
PWMB_CCR0=1075052624,
PWMB_CCR2=1075052628,
PWMB_CRLR0=1075052632,
PWMB_CFLR0=1075052636,
PWMB_CRLR1=1075052640,
PWMB_CFLR1=1075052644,
PWMB_CRLR2=1075052648,
PWMB_CFLR2=1075052652,
PWMB_CRLR3=1075052656,
PWMB_CFLR3=1075052660,
PWMB_CAPENR=1075052664,
PWMB_POE=1075052668,
PWMB_TCON=1075052672,
PWMB_TSTATUS=1075052676,
PWMB_SYNCBUSY0=1075052680,
PWMB_SYNCBUSY1=1075052684,
PWMB_SYNCBUSY2=1075052688,
PWMB_SYNCBUSY3=1075052692,
RTC_INIR=1073774592,
RTC_AER=1073774596,
RTC_FCR=1073774600,
RTC_TLR=1073774604,
RTC_CLR=1073774608,
RTC_TSSR=1073774612,
RTC_DWR=1073774616,
RTC_TAR=1073774620,
RTC_CAR=1073774624,
RTC_LIR=1073774628,
RTC_RIER=1073774632,
RTC_RIIR=1073774636,
RTC_TTR=1073774640,
SPI0_SPI_CNTRL=1073938432,
SPI0_SPI_DIVIDER=1073938436,
SPI0_SPI_SSR=1073938440,
SPI0_SPI_RX0=1073938448,
SPI0_SPI_RX1=1073938452,
SPI0_SPI_TX0=1073938464,
SPI0_SPI_TX1=1073938468,
SPI0_SPI_VARCLK=1073938484,
SPI0_SPI_DMA=1073938488,
SPI0_SPI_CNTRL2=1073938492,
SPI0_SPI_FIFO_CTL=1073938496,
SPI0_SPI_STATUS=1073938500,
SPI1_SPI_CNTRL=1073954816,
SPI1_SPI_DIVIDER=1073954820,
SPI1_SPI_SSR=1073954824,
SPI1_SPI_RX0=1073954832,
SPI1_SPI_RX1=1073954836,
SPI1_SPI_TX0=1073954848,
SPI1_SPI_TX1=1073954852,
SPI1_SPI_VARCLK=1073954868,
SPI1_SPI_DMA=1073954872,
SPI1_SPI_CNTRL2=1073954876,
SPI1_SPI_FIFO_CTL=1073954880,
SPI1_SPI_STATUS=1073954884,
SPI2_SPI_CNTRL=1074987008,
SPI2_SPI_DIVIDER=1074987012,
SPI2_SPI_SSR=1074987016,
SPI2_SPI_RX0=1074987024,
SPI2_SPI_RX1=1074987028,
SPI2_SPI_TX0=1074987040,
SPI2_SPI_TX1=1074987044,
SPI2_SPI_VARCLK=1074987060,
SPI2_SPI_DMA=1074987064,
SPI2_SPI_CNTRL2=1074987068,
SPI2_SPI_FIFO_CTL=1074987072,
SPI2_SPI_STATUS=1074987076,
SPI3_SPI_CNTRL=1075003392,
SPI3_SPI_DIVIDER=1075003396,
SPI3_SPI_SSR=1075003400,
SPI3_SPI_RX0=1075003408,
SPI3_SPI_RX1=1075003412,
SPI3_SPI_TX0=1075003424,
SPI3_SPI_TX1=1075003428,
SPI3_SPI_VARCLK=1075003444,
SPI3_SPI_DMA=1075003448,
SPI3_SPI_CNTRL2=1075003452,
SPI3_SPI_FIFO_CTL=1075003456,
SPI3_SPI_STATUS=1075003460,
TMR01_TCSR0=1073807360,
TMR01_TCMPR0=1073807364,
TMR01_TISR0=1073807368,
TMR01_TDR0=1073807372,
TMR01_TCAP0=1073807376,
TMR01_TEXCON0=1073807380,
TMR01_TEXISR0=1073807384,
TMR01_TCSR1=1073807392,
TMR01_TCMPR1=1073807396,
TMR01_TISR1=1073807400,
TMR01_TDR1=1073807404,
TMR01_TCAP1=1073807408,
TMR01_TEXCON1=1073807412,
TMR01_TEXISR1=1073807416,
TMR23_TCSR2=1074855936,
TMR23_TCMPR2=1074855940,
TMR23_TISR2=1074855944,
TMR23_TDR2=1074855948,
TMR23_TCAP2=1074855952,
TMR23_TEXCON2=1074855956,
TMR23_TEXISR2=1074855960,
TMR23_TCSR3=1074855968,
TMR23_TCMPR3=1074855972,
TMR23_TISR3=1074855976,
TMR23_TDR3=1074855980,
TMR23_TCAP3=1074855984,
TMR23_TEXCON3=1074855988,
TMR23_TEXISR3=1074855992,
WDT_WTCR=1073758208,
WDT_WTCRALT=1073758212,
WWDT_WWDTRLD=1073758464,
WWDT_WWDTCR=1073758468,
WWDT_WWDTSR=1073758472,
WWDT_WWDTCVR=1073758476,
UART0_UA_RBR=1074069504,
UART0_UA_THR=1074069504,
UART0_UA_IER=1074069508,
UART0_UA_FCR=1074069512,
UART0_UA_LCR=1074069516,
UART0_UA_MCR=1074069520,
UART0_UA_MSR=1074069524,
UART0_UA_FSR=1074069528,
UART0_UA_ISR=1074069532,
UART0_UA_TOR=1074069536,
UART0_UA_BAUD=1074069540,
UART0_UA_IRCR=1074069544,
UART0_UA_ALT_CSR=1074069548,
UART0_UA_FUN_SEL=1074069552,
UART0_UA_LIN_CTL=1074069556,
UART0_UA_LIN_SR=1074069560,
UART1_UA_RBR=1075118080,
UART1_UA_THR=1075118080,
UART1_UA_IER=1075118084,
UART1_UA_FCR=1075118088,
UART1_UA_LCR=1075118092,
UART1_UA_MCR=1075118096,
UART1_UA_MSR=1075118100,
UART1_UA_FSR=1075118104,
UART1_UA_ISR=1075118108,
UART1_UA_TOR=1075118112,
UART1_UA_BAUD=1075118116,
UART1_UA_IRCR=1075118120,
UART1_UA_ALT_CSR=1075118124,
UART1_UA_FUN_SEL=1075118128,
UART1_UA_LIN_CTL=1075118132,
UART1_UA_LIN_SR=1075118136,
UART2_UA_RBR=1075134464,
UART2_UA_THR=1075134464,
UART2_UA_IER=1075134468,
UART2_UA_FCR=1075134472,
UART2_UA_LCR=1075134476,
UART2_UA_MCR=1075134480,
UART2_UA_MSR=1075134484,
UART2_UA_FSR=1075134488,
UART2_UA_ISR=1075134492,
UART2_UA_TOR=1075134496,
UART2_UA_BAUD=1075134500,
UART2_UA_IRCR=1075134504,
UART2_UA_ALT_CSR=1075134508,
UART2_UA_FUN_SEL=1075134512,
UART2_UA_LIN_CTL=1075134516,
UART2_UA_LIN_SR=1075134520,
PS2_PS2CON=1074790400,
PS2_PS2TXDATA0=1074790404,
PS2_PS2TXDATA1=1074790408,
PS2_PS2TXDATA2=1074790412,
PS2_PS2TXDATA3=1074790416,
PS2_PS2RXDATA=1074790420,
PS2_PS2STATUS=1074790424,
PS2_PS2INTID=1074790428,
I2S_I2SCON=1075445760,
I2S_I2SCLKDIV=1075445764,
I2S_I2SIE=1075445768,
I2S_I2SSTATUS=1075445772,
I2S_I2STXFIFO=1075445776,
I2S_I2SRXFIFO=1075445780,
ADC_ADDR0=1074659328,
ADC_ADDR1=1074659332,
ADC_ADDR2=1074659336,
ADC_ADDR3=1074659340,
ADC_ADDR4=1074659344,
ADC_ADDR5=1074659348,
ADC_ADDR6=1074659352,
ADC_ADDR7=1074659356,
ADC_ADCR=1074659360,
ADC_ADCHER=1074659364,
ADC_ADCMPR0=1074659368,
ADC_ADCMPR1=1074659372,
ADC_ADSR=1074659376,
ADC_ADPDMA=1074659392,
ACMP_CMPCR0=1074593792,
ACMP_CMPCR1=1074593796,
ACMP_CMPSR=1074593800,
PDMA_CH0_PDMA_CSRx=1342210048,
PDMA_CH0_PDMA_SARx=1342210052,
PDMA_CH0_PDMA_DARx=1342210056,
PDMA_CH0_PDMA_BCRx=1342210060,
PDMA_CH0_PDMA_POINTx=1342210064,
PDMA_CH0_PDMA_CSARx=1342210068,
PDMA_CH0_PDMA_CDARx=1342210072,
PDMA_CH0_PDMA_CBCRx=1342210076,
PDMA_CH0_PDMA_IERx=1342210080,
PDMA_CH0_PDMA_ISRx=1342210084,
PDMA_CH0_PDMA_SBUF0_Cx=1342210176,
PDMA_CH1_PDMA_CSRx=1342210304,
PDMA_CH1_PDMA_SARx=1342210308,
PDMA_CH1_PDMA_DARx=1342210312,
PDMA_CH1_PDMA_BCRx=1342210316,
PDMA_CH1_PDMA_POINTx=1342210320,
PDMA_CH1_PDMA_CSARx=1342210324,
PDMA_CH1_PDMA_CDARx=1342210328,
PDMA_CH1_PDMA_CBCRx=1342210332,
PDMA_CH1_PDMA_IERx=1342210336,
PDMA_CH1_PDMA_ISRx=1342210340,
PDMA_CH1_PDMA_SBUF0_Cx=1342210432,
PDMA_CH2_PDMA_CSRx=1342210560,
PDMA_CH2_PDMA_SARx=1342210564,
PDMA_CH2_PDMA_DARx=1342210568,
PDMA_CH2_PDMA_BCRx=1342210572,
PDMA_CH2_PDMA_POINTx=1342210576,
PDMA_CH2_PDMA_CSARx=1342210580,
PDMA_CH2_PDMA_CDARx=1342210584,
PDMA_CH2_PDMA_CBCRx=1342210588,
PDMA_CH2_PDMA_IERx=1342210592,
PDMA_CH2_PDMA_ISRx=1342210596,
PDMA_CH2_PDMA_SBUF0_Cx=1342210688,
PDMA_CH3_PDMA_CSRx=1342210816,
PDMA_CH3_PDMA_SARx=1342210820,
PDMA_CH3_PDMA_DARx=1342210824,
PDMA_CH3_PDMA_BCRx=1342210828,
PDMA_CH3_PDMA_POINTx=1342210832,
PDMA_CH3_PDMA_CSARx=1342210836,
PDMA_CH3_PDMA_CDARx=1342210840,
PDMA_CH3_PDMA_CBCRx=1342210844,
PDMA_CH3_PDMA_IERx=1342210848,
PDMA_CH3_PDMA_ISRx=1342210852,
PDMA_CH3_PDMA_SBUF0_Cx=1342210944,
PDMA_CH4_PDMA_CSRx=1342211072,
PDMA_CH4_PDMA_SARx=1342211076,
PDMA_CH4_PDMA_DARx=1342211080,
PDMA_CH4_PDMA_BCRx=1342211084,
PDMA_CH4_PDMA_POINTx=1342211088,
PDMA_CH4_PDMA_CSARx=1342211092,
PDMA_CH4_PDMA_CDARx=1342211096,
PDMA_CH4_PDMA_CBCRx=1342211100,
PDMA_CH4_PDMA_IERx=1342211104,
PDMA_CH4_PDMA_ISRx=1342211108,
PDMA_CH4_PDMA_SBUF0_Cx=1342211200,
PDMA_CH5_PDMA_CSRx=1342211328,
PDMA_CH5_PDMA_SARx=1342211332,
PDMA_CH5_PDMA_DARx=1342211336,
PDMA_CH5_PDMA_BCRx=1342211340,
PDMA_CH5_PDMA_POINTx=1342211344,
PDMA_CH5_PDMA_CSARx=1342211348,
PDMA_CH5_PDMA_CDARx=1342211352,
PDMA_CH5_PDMA_CBCRx=1342211356,
PDMA_CH5_PDMA_IERx=1342211360,
PDMA_CH5_PDMA_ISRx=1342211364,
PDMA_CH5_PDMA_SBUF0_Cx=1342211456,
PDMA_CH6_PDMA_CSRx=1342211584,
PDMA_CH6_PDMA_SARx=1342211588,
PDMA_CH6_PDMA_DARx=1342211592,
PDMA_CH6_PDMA_BCRx=1342211596,
PDMA_CH6_PDMA_POINTx=1342211600,
PDMA_CH6_PDMA_CSARx=1342211604,
PDMA_CH6_PDMA_CDARx=1342211608,
PDMA_CH6_PDMA_CBCRx=1342211612,
PDMA_CH6_PDMA_IERx=1342211616,
PDMA_CH6_PDMA_ISRx=1342211620,
PDMA_CH6_PDMA_SBUF0_Cx=1342211712,
PDMA_CH7_PDMA_CSRx=1342211840,
PDMA_CH7_PDMA_SARx=1342211844,
PDMA_CH7_PDMA_DARx=1342211848,
PDMA_CH7_PDMA_BCRx=1342211852,
PDMA_CH7_PDMA_POINTx=1342211856,
PDMA_CH7_PDMA_CSARx=1342211860,
PDMA_CH7_PDMA_CDARx=1342211864,
PDMA_CH7_PDMA_CBCRx=1342211868,
PDMA_CH7_PDMA_IERx=1342211872,
PDMA_CH7_PDMA_ISRx=1342211876,
PDMA_CH7_PDMA_SBUF0_Cx=1342211968,
PDMA_CH8_PDMA_CSRx=1342212096,
PDMA_CH8_PDMA_SARx=1342212100,
PDMA_CH8_PDMA_DARx=1342212104,
PDMA_CH8_PDMA_BCRx=1342212108,
PDMA_CH8_PDMA_POINTx=1342212112,
PDMA_CH8_PDMA_CSARx=1342212116,
PDMA_CH8_PDMA_CDARx=1342212120,
PDMA_CH8_PDMA_CBCRx=1342212124,
PDMA_CH8_PDMA_IERx=1342212128,
PDMA_CH8_PDMA_ISRx=1342212132,
PDMA_CH8_PDMA_SBUF0_Cx=1342212224,
CRC_CRC_CTL=1342213632,
CRC_CRC_DMASAR=1342213636,
CRC_CRC_DMABCR=1342213644,
CRC_CRC_DMACSAR=1342213652,
CRC_CRC_DMACBCR=1342213660,
CRC_CRC_DMAIER=1342213664,
CRC_CRC_DMAISR=1342213668,
CRC_CRC_WDATA=1342213760,
CRC_CRC_SEED=1342213764,
CRC_CRC_CHECKSUM=1342213768,
PDMA_GCR_PDMA_GCRCSR=1342213888,
PDMA_GCR_PDMA_PDSSR0=1342213892,
PDMA_GCR_PDMA_PDSSR1=1342213896,
PDMA_GCR_PDMA_GCRISR=1342213900,
PDMA_GCR_PDMA_PDSSR2=1342213904,
SC0_SC_RBR=1075380224,
SC0_SC_THR=1075380224,
SC0_SC_CTL=1075380228,
SC0_SC_ALTCTL=1075380232,
SC0_SC_EGTR=1075380236,
SC0_SC_RFTMR=1075380240,
SC0_SC_ETUCR=1075380244,
SC0_SC_IER=1075380248,
SC0_SC_ISR=1075380252,
SC0_SC_TRSR=1075380256,
SC0_SC_PINCSR=1075380260,
SC0_SC_TMR0=1075380264,
SC0_SC_TMR1=1075380268,
SC0_SC_TMR2=1075380272,
SC0_SC_UACTL=1075380276,
SC0_SC_TDRA=1075380280,
SC0_SC_TDRB=1075380284,
SC1_SC_RBR=1075396608,
SC1_SC_THR=1075396608,
SC1_SC_CTL=1075396612,
SC1_SC_ALTCTL=1075396616,
SC1_SC_EGTR=1075396620,
SC1_SC_RFTMR=1075396624,
SC1_SC_ETUCR=1075396628,
SC1_SC_IER=1075396632,
SC1_SC_ISR=1075396636,
SC1_SC_TRSR=1075396640,
SC1_SC_PINCSR=1075396644,
SC1_SC_TMR0=1075396648,
SC1_SC_TMR1=1075396652,
SC1_SC_TMR2=1075396656,
SC1_SC_UACTL=1075396660,
SC1_SC_TDRA=1075396664,
SC1_SC_TDRB=1075396668,
SC2_SC_RBR=1075412992,
SC2_SC_THR=1075412992,
SC2_SC_CTL=1075412996,
SC2_SC_ALTCTL=1075413000,
SC2_SC_EGTR=1075413004,
SC2_SC_RFTMR=1075413008,
SC2_SC_ETUCR=1075413012,
SC2_SC_IER=1075413016,
SC2_SC_ISR=1075413020,
SC2_SC_TRSR=1075413024,
SC2_SC_PINCSR=1075413028,
SC2_SC_TMR0=1075413032,
SC2_SC_TMR1=1075413036,
SC2_SC_TMR2=1075413040,
SC2_SC_UACTL=1075413044,
SC2_SC_TDRA=1075413048,
SC2_SC_TDRB=1075413052,
FMC_ISPCON=1342226432,
FMC_ISPADR=1342226436,
FMC_ISPDAT=1342226440,
FMC_ISPCMD=1342226444,
FMC_ISPTRG=1342226448,
FMC_DFBADR=1342226452,
FMC_FATCON=1342226456,
FMC_ISPSTA=1342226496,
CAN0_CAN_CON=1075314688,
CAN0_CAN_STATUS=1075314692,
CAN0_CAN_ERR=1075314696,
CAN0_CAN_BTIME=1075314700,
CAN0_CAN_IIDR=1075314704,
CAN0_CAN_TEST=1075314708,
CAN0_CAN_BRPE=1075314712,
CAN0_CAN_IF1_CREQ=1075314720,
CAN0_CAN_IF1_CMASK=1075314724,
CAN0_CAN_IF1_MASK1=1075314728,
CAN0_CAN_IF1_MASK2=1075314732,
CAN0_CAN_IF1_ARB1=1075314736,
CAN0_CAN_IF1_ARB2=1075314740,
CAN0_CAN_IF1_MCON=1075314744,
CAN0_CAN_IF1_DAT_A1=1075314748,
CAN0_CAN_IF1_DAT_A2=1075314752,
CAN0_CAN_IF1_DAT_B1=1075314756,
CAN0_CAN_IF1_DAT_B2=1075314760,
CAN0_CAN_IF2_CREQ=1075314816,
CAN0_CAN_IF2_CMASK=1075314820,
CAN0_CAN_IF2_MASK1=1075314824,
CAN0_CAN_IF2_MASK2=1075314828,
CAN0_CAN_IF2_ARB1=1075314832,
CAN0_CAN_IF2_ARB2=1075314836,
CAN0_CAN_IF2_MCON=1075314840,
CAN0_CAN_IF2_DAT_A1=1075314844,
CAN0_CAN_IF2_DAT_A2=1075314848,
CAN0_CAN_IF2_DAT_B1=1075314852,
CAN0_CAN_IF2_DAT_B2=1075314856,
CAN0_CAN_TXREQ1=1075314944,
CAN0_CAN_TXREQ2=1075314948,
CAN0_CAN_NDAT1=1075314976,
CAN0_CAN_NDAT2=1075314980,
CAN0_CAN_IPND1=1075315008,
CAN0_CAN_IPND2=1075315012,
CAN0_CAN_MVLD1=1075315040,
CAN0_CAN_MVLD2=1075315044,
CAN0_CAN_WU_EN=1075315048,
CAN0_CAN_WU_STATUS=1075315052,
CAN1_CAN_CON=1075331072,
CAN1_CAN_STATUS=1075331076,
CAN1_CAN_ERR=1075331080,
CAN1_CAN_BTIME=1075331084,
CAN1_CAN_IIDR=1075331088,
CAN1_CAN_TEST=1075331092,
CAN1_CAN_BRPE=1075331096,
CAN1_CAN_IF1_CREQ=1075331104,
CAN1_CAN_IF1_CMASK=1075331108,
CAN1_CAN_IF1_MASK1=1075331112,
CAN1_CAN_IF1_MASK2=1075331116,
CAN1_CAN_IF1_ARB1=1075331120,
CAN1_CAN_IF1_ARB2=1075331124,
CAN1_CAN_IF1_MCON=1075331128,
CAN1_CAN_IF1_DAT_A1=1075331132,
CAN1_CAN_IF1_DAT_A2=1075331136,
CAN1_CAN_IF1_DAT_B1=1075331140,
CAN1_CAN_IF1_DAT_B2=1075331144,
CAN1_CAN_IF2_CREQ=1075331200,
CAN1_CAN_IF2_CMASK=1075331204,
CAN1_CAN_IF2_MASK1=1075331208,
CAN1_CAN_IF2_MASK2=1075331212,
CAN1_CAN_IF2_ARB1=1075331216,
CAN1_CAN_IF2_ARB2=1075331220,
CAN1_CAN_IF2_MCON=1075331224,
CAN1_CAN_IF2_DAT_A1=1075331228,
CAN1_CAN_IF2_DAT_A2=1075331232,
CAN1_CAN_IF2_DAT_B1=1075331236,
CAN1_CAN_IF2_DAT_B2=1075331240,
CAN1_CAN_TXREQ1=1075331328,
CAN1_CAN_TXREQ2=1075331332,
CAN1_CAN_NDAT1=1075331360,
CAN1_CAN_NDAT2=1075331364,
CAN1_CAN_IPND1=1075331392,
CAN1_CAN_IPND2=1075331396,
CAN1_CAN_MVLD1=1075331424,
CAN1_CAN_MVLD2=1075331428,
CAN1_CAN_WU_EN=1075331432,
CAN1_CAN_WU_STATUS=1075331436,
EBI_EBICON=1342242816,
EBI_EXTIME=1342242820,
}
g_NUC2xx_regs=REG
function read_NUC200_Registers(t,t,t,e)
local o=false
local t={
NUC230_AE_LQFP48=1,
NUC230_AE_LQFP64=1,
NUC230_AE_LQFP100=1,
NUC240_AE_LQFP48=1,
NUC240_AE_LQFP64=1,
NUC240_AE_LQFP100=1}
if t[e]~=nil then o=true end
local t=false
local a={
NUC230_AE_LQFP48=1,
NUC230_AE_LQFP64=1,
NUC230_AE_LQFP100=1,
NUC240_AE_LQFP48=1,
NUC240_AE_LQFP64=1,
NUC240_AE_LQFP100=1,
NUC2201_AE_LQFP48=1,
NUC2201_AE_LQFP64=1}
if a[e]~=nil then t=true end
local a=false
local i={
NUC2201_AE_LQFP48=1,
NUC2201_AE_LQFP64=1}
if i[e]~=nil then a=true end
local e={}
e["GCR_GPA_MFP"],
e["GCR_GPB_MFP"],
e["GCR_GPC_MFP"],
e["GCR_GPD_MFP"],
e["GCR_GPE_MFP"],
e["GCR_GPF_MFP"],
e["REG_DUMMY0"],
e["REG_DUMMY1"],
e["GCR_ALT_MFP"],
e["REG_DUMMY2"],
e["GCR_ALT_MFP1"]=ice:ReadMem32(g_NUC2xx_regs.GCR_GPA_MFP,11)
e["GCR_ALT_MFP2"],
e["GCR_IRCTRIMCTL"]=ice:ReadMemMulti(g_NUC2xx_regs.GCR_ALT_MFP2,
g_NUC2xx_regs.GCR_IRCTRIMCTL)
if a then
e["GCR_HIRCTCTL"]=ice:ReadMemMulti(g_NUC2xx_regs.GCR_HIRCTCTL)
end
e["GPIO_GPIOA_PMD"],
e["GPIO_GPIOA_OFFD"],
e["GPIO_GPIOA_DOUT"],
e["GPIO_GPIOA_DMASK"],
e["GPIO_GPIOA_PIN"]=ice:ReadMem32(g_NUC2xx_regs.GPIO_GPIOA_PMD,5)
e["GPIO_GPIOB_PMD"],
e["GPIO_GPIOB_OFFD"],
e["GPIO_GPIOB_DOUT"],
e["GPIO_GPIOB_DMASK"],
e["GPIO_GPIOB_PIN"]=ice:ReadMem32(g_NUC2xx_regs.GPIO_GPIOB_PMD,5)
e["GPIO_GPIOC_PMD"],
e["GPIO_GPIOC_OFFD"],
e["GPIO_GPIOC_DOUT"],
e["GPIO_GPIOC_DMASK"],
e["GPIO_GPIOC_PIN"]=ice:ReadMem32(g_NUC2xx_regs.GPIO_GPIOC_PMD,5)
e["GPIO_GPIOD_PMD"],
e["GPIO_GPIOD_OFFD"],
e["GPIO_GPIOD_DOUT"],
e["GPIO_GPIOD_DMASK"],
e["GPIO_GPIOD_PIN"]=ice:ReadMem32(g_NUC2xx_regs.GPIO_GPIOD_PMD,5)
e["GPIO_GPIOE_PMD"],
e["GPIO_GPIOE_OFFD"],
e["GPIO_GPIOE_DOUT"],
e["GPIO_GPIOE_DMASK"],
e["GPIO_GPIOE_PIN"]=ice:ReadMem32(g_NUC2xx_regs.GPIO_GPIOE_PMD,5)
e["GPIO_GPIOF_PMD"],
e["GPIO_GPIOF_OFFD"],
e["GPIO_GPIOF_DOUT"],
e["GPIO_GPIOF_DMASK"],
e["GPIO_GPIOF_PIN"]=ice:ReadMem32(g_NUC2xx_regs.GPIO_GPIOF_PMD,5)
e["CLK_PWRCON"],
e["CLK_AHBCLK"],
e["CLK_APBCLK"],
e["CLK_CLKSTATUS"],
e["CLK_CLKSEL0"],
e["CLK_CLKSEL1"],
e["CLK_CLKDIV"],
e["CLK_CLKSEL2"],
e["CLK_PLLCON"],
e["CLK_FRQDIV"]=ice:ReadMem32(g_NUC2xx_regs.CLK_PWRCON,10)
e["CLK_APBCLK1"],
e["CLK_CLKSEL3"],
e["CLK_CLKDIV1"]=ice:ReadMem32(g_NUC2xx_regs.CLK_APBCLK1,3)
e["I2S_I2SCON"],
e["I2S_I2SCLKDIV"]=ice:ReadMemMulti(g_NUC2xx_regs.I2S_I2SCON,
g_NUC2xx_regs.I2S_I2SCLKDIV)
e["UART0_UA_BAUD"],
e["UART1_UA_BAUD"],
e["UART2_UA_BAUD"]=ice:ReadMemMulti(g_NUC2xx_regs.UART0_UA_BAUD,
g_NUC2xx_regs.UART1_UA_BAUD,
g_NUC2xx_regs.UART2_UA_BAUD)
e["SPI0_SPI_CNTRL"],
e["SPI0_SPI_DIVIDER"],
e["SPI0_SPI_CNTRL2"]=ice:ReadMemMulti(g_NUC2xx_regs.SPI0_SPI_CNTRL,
g_NUC2xx_regs.SPI0_SPI_DIVIDER,
g_NUC2xx_regs.SPI0_SPI_CNTRL2)
e["SPI1_SPI_CNTRL"],
e["SPI1_SPI_DIVIDER"],
e["SPI1_SPI_CNTRL2"]=ice:ReadMemMulti(g_NUC2xx_regs.SPI1_SPI_CNTRL,
g_NUC2xx_regs.SPI1_SPI_DIVIDER,
g_NUC2xx_regs.SPI1_SPI_CNTRL2)
e["SPI2_SPI_CNTRL"],
e["SPI2_SPI_DIVIDER"],
e["SPI2_SPI_CNTRL2"]=ice:ReadMemMulti(g_NUC2xx_regs.SPI2_SPI_CNTRL,
g_NUC2xx_regs.SPI2_SPI_DIVIDER,
g_NUC2xx_regs.SPI2_SPI_CNTRL2)
e["SPI3_SPI_CNTRL"],
e["SPI3_SPI_DIVIDER"],
e["SPI3_SPI_CNTRL2"]=ice:ReadMemMulti(g_NUC2xx_regs.SPI3_SPI_CNTRL,
g_NUC2xx_regs.SPI3_SPI_DIVIDER,
g_NUC2xx_regs.SPI3_SPI_CNTRL2)
e["I2C0_I2CON"],
e["I2C0_I2CLK"],
e["I2C1_I2CON"],
e["I2C1_I2CLK"]=ice:ReadMemMulti(g_NUC2xx_regs.I2C0_I2CON,
g_NUC2xx_regs.I2C0_I2CLK,
g_NUC2xx_regs.I2C1_I2CON,
g_NUC2xx_regs.I2C1_I2CLK)
e["PWMA_PPR"],
e["PWMA_CSR"],
e["PWMB_PPR"],
e["PWMB_CSR"]=ice:ReadMemMulti(g_NUC2xx_regs.PWMA_PPR,
g_NUC2xx_regs.PWMA_CSR,
g_NUC2xx_regs.PWMB_PPR,
g_NUC2xx_regs.PWMB_CSR)
e["TMR01_TCSR0"],
e["TMR01_TCSR1"],
e["TMR23_TCSR2"],
e["TMR23_TCSR3"]=ice:ReadMemMulti(g_NUC2xx_regs.TMR01_TCSR0,
g_NUC2xx_regs.TMR01_TCSR1,
g_NUC2xx_regs.TMR23_TCSR2,
g_NUC2xx_regs.TMR23_TCSR3)
e["SC0_SC_CTL"],
e["SC1_SC_CTL"],
e["SC2_SC_CTL"]=ice:ReadMemMulti(g_NUC2xx_regs.SC0_SC_CTL,
g_NUC2xx_regs.SC1_SC_CTL,
g_NUC2xx_regs.SC2_SC_CTL)
e["SC0_SC_UACTL"],
e["SC1_SC_UACTL"],
e["SC2_SC_UACTL"]=ice:ReadMemMulti(g_NUC2xx_regs.SC0_SC_UACTL,
g_NUC2xx_regs.SC1_SC_UACTL,
g_NUC2xx_regs.SC2_SC_UACTL)
e["SC0_SC_ETUCR"],
e["SC1_SC_ETUCR"],
e["SC2_SC_ETUCR"]=ice:ReadMemMulti(g_NUC2xx_regs.SC0_SC_ETUCR,
g_NUC2xx_regs.SC1_SC_ETUCR,
g_NUC2xx_regs.SC2_SC_ETUCR)
e["ADC_ADCR"]=ice:ReadMem32(g_NUC2xx_regs.ADC_ADCR)
if o then
e["CAN0_CAN_BTIME"],
e["CAN0_CAN_BRPE"],
e["CAN1_CAN_BTIME"],
e["CAN1_CAN_BRPE"]=ice:ReadMemMulti(g_NUC2xx_regs.CAN0_CAN_BTIME,
g_NUC2xx_regs.CAN0_CAN_BRPE,
g_NUC2xx_regs.CAN1_CAN_BTIME,
g_NUC2xx_regs.CAN1_CAN_BRPE)
end
if t then
e["EBI_EBICON"],
e["EBI_EXTIME"]=ice:ReadMemMulti(g_NUC2xx_regs.EBI_EBICON,
g_NUC2xx_regs.EBI_EXTIME)
end
return e
end
local n={
[0]=kPinDirection_In,
[1]=kPinDirection_PushPullOut,
[2]=kPinDirection_OpenDrainOut,
[3]=kPinDirection_Bi,
}
local w={
[0]="INPUT",
[1]="OUTPUT",
[2]="Open-Drain",
[3]="Quasi-bidirectional",
}
function get_mfp_regs(o,e,i,a,t)
local e={"GCR_GP"..e.."_MFP"}
if i~=nil then table.insert(e,i)end
if a~=nil then table.insert(e,a)end
if t~=nil then table.insert(e,t)end
if#e>1 then
return reg2str("Multi-Function registers",g_NUC2xx_regs,o,e)
else
return reg2str("Multi-Function register",g_NUC2xx_regs,o,e)
end
end
function fill_NUC200_GPIO(i,s,t,e,l,f,c,u)
local o
if l==nil then l=string.format("P%s.%d",t,e)end
local a=s["GPIO_GPIO"..t.."_PMD"]
local m=s["GPIO_GPIO"..t.."_OFFD"]
local r=s["GPIO_GPIO"..t.."_DOUT"]
local h=s["GPIO_GPIO"..t.."_DMASK"]
local d=s["GPIO_GPIO"..t.."_PIN"]
i["highlight_text"]=string.format("P%s.%d",t,e)
i["normal_color"]=kColor_Invalid
i["highlight_color"]=kColor_GPIO
i["pin_bg_color"]=kBgColor_GPIO
o=ext.band(ext.rshift(a,e*2),3)
i["direction"]=n[o]
if n[o]==kPinDirection_In
or n[o]==kPinDirection_Bi then
if ext.band(d,ext.lshift(1,e))==0 then
i["status"]=kPinStatus_Low
else
i["status"]=kPinStatus_High
end
else
if ext.band(h,ext.lshift(1,e))~=0 then
i["status"]=kPinStatus_Unknown
elseif ext.band(r,ext.lshift(1,e))==0 then
i["status"]=kPinStatus_Low
else
i["status"]=kPinStatus_High
end
end
local a=string.format("P%s.%d is in <b>%s</b> mode<br>",
t,e,w[o])
if n[o]==kPinDirection_In
or n[o]==kPinDirection_Bi then
if ext.band(d,ext.lshift(1,e))==0 then
a=a.."Pin input <b>low</b><br>"
else
a=a.."Pin input <b>high</b><br>"
end
end
if n[o]==kPinDirection_PushPullOut
or n[o]==kPinDirection_OpenDrainOut
or n[o]==kPinDirection_Bi then
if ext.band(h,ext.lshift(1,e))~=0 then
a=a.."Pin output <b>masked</b><br>"
elseif ext.band(r,ext.lshift(1,e))==0 then
a=a.."Pin output <b>low</b><br>"
else
a=a.."Pin output <b>high</b><br>"
end
end
if ext.band(m,ext.lshift(1,e+16))==0 then
a=a.."IO digital input path <b>enabled</b><br>"
else
a=a.."IO digital input path <b>disabled</b>(digital input tied to low)<br>"
end
local h=""
if n[o]==kPinDirection_PushPullOut
or n[o]==kPinDirection_Bi then
if ext.band(r,ext.lshift(1,e))==0 and ext.band(d,ext.lshift(1,e))~=0 then
h=string.format("Leakage warning: GP%s_DOUT[%d] = 0, GP%s_PIN[%d] = 1<br>",t,e,t,e)
elseif ext.band(r,ext.lshift(1,e))~=0 and ext.band(d,ext.lshift(1,e))==0 then
h=string.format("Leakage warning: GP%s_DOUT[%d] = 1, GP%s_PIN[%d] = 0<br>",t,e,t,e)
end
end
if h~=""then
i["pin_no_color"]=kBgColor_Error
h="<font color=red>"..h.."</font>"
end
local e={
"GPIO_GPIO"..t.."_PMD",
"GPIO_GPIO"..t.."_OFFD",
"GPIO_GPIO"..t.."_DOUT",
"GPIO_GPIO"..t.."_DMASK",
"GPIO_GPIO"..t.."_PIN"}
local e=reg2str("GPIO setting registers",g_NUC2xx_regs,s,e)
i["information"]=string.format("<b>%s</b><br>%s<br>"..
"%s%s"..
"<b>Information</b><br>"..
"%s",
l,
h,
get_mfp_regs(s,t,f,c,u),
e,
a)
end
function fill_invalid_GPIO(e,i,t,a,o,n)
e["highlight_text"]=string.format("P%s.%d",t,a)
e["normal_color"]=kColor_Invalid
e["highlight_color"]=kColor_Invalid
e["pin_bg_color"]=kBgColor_Invalid
e["direction"]=kPinDirection_Unknown
e["status"]=kPinStatus_Unknown
e["pin_no_color"]=kBgColor_Error
local s="<font color=red>Undefined setting in Multi-Function registers for this pin</font><br>"
e["information"]=string.format("<b>P%s.%d</b><br>%s<br>"..
"%s",
t,a,
s,
get_mfp_regs(i,t,o,n))
end
function get_XTL12M_clock(a,o)
local t
local e
table.insert(o,"CLK_PWRCON")
local a=ext.band(a["CLK_PWRCON"],1)
if a==0 then
t=0
e="invalid external <b>4~24M</b> high speed crystal clock (see PWRCON[0].XTL12M_EN)"
else
t=12000000
e="external <b>4~24M</b> high speed crystal clock, <font color=blue>when</font> external input clock is <font color=blue>12M</font>"
end
return t,e
end
function get_XTL32K_clock(o,a)
local t
local e
table.insert(a,"CLK_PWRCON")
local a=ext.band(o["CLK_PWRCON"],2)
if a==0 then
t=0
e="invalid external <b>32.768kHz</b> low speed crystal clock (see PWRCON[1].XTL32K_EN)"
else
t=32768
e="external <b>32.768kHz</b> low speed crystal clock"
end
return t,e
end
function get_OSC22M_clock(o,a)
local t
local e
table.insert(a,"CLK_PWRCON")
local i=ext.band(o["CLK_PWRCON"],4)
if i==0 then
t=0
e="invalid internal <b>22.1184MHz</b> high speed oscillator clock (see PWRCON[2].OSC22M_EN)"
else
table.insert(a,"GCR_IRCTRIMCTL")
local a=ext.band(o["GCR_IRCTRIMCTL"],3)
if a==0 then
t=22118400
e="internal <b>22.1184MHz</b> high speed oscillator clock"
elseif a==1 then
t=22118400
e="internal <b>22.1184MHz</b> high speed oscillator clock (auto trim)"
elseif a==2 then
t=24000000
e="internal <b>24MHz</b> high speed oscillator clock (auto trim)"
else
t=0
e="invalid HIRC trim frequency selection (see GCR_IRCTRIMCTL[1:0].TRIM_SEL)"
end
end
return t,e
end
function get_OSC10K_clock(a,o)
local e
local t
table.insert(o,"CLK_PWRCON")
local a=ext.band(a["CLK_PWRCON"],8)
if a==0 then
e=0
t="invalid internal <b>10kHz</b> low speed oscillator clock (see PWRCON[3].OSC10K_EN)"
else
e=10000
t="internal <b>10kHz</b> low speed oscillator clock"
end
return e,t
end
function get_OSC48M_clock(o,a)
local e
local t
table.insert(a,"CLK_PWRCON")
local i=ext.band(o["CLK_PWRCON"],4096)
if i==0 then
e=0
t="invalid internal <b>48MHz</b> high speed oscillator clock (see PWRCON[12].OSC48M_EN)"
else
table.insert(a,"GCR_HIRCTCTL")
local a=ext.band(o["GCR_HIRCTCTL"],3)
if a==0 then
e=48000000
t="internal <b>48MHz</b> high speed oscillator clock"
elseif a==1 then
e=48000000
t="internal <b>48MHz</b> high speed oscillator clock (auto trim)"
else
e=0
t="invalid HIRC trim frequency selection (see GCR_HIRCTCTL[1:0].FREQSEL)"
end
end
return e,t
end
function get_PLL_clock(a,o)
local t
local e
table.insert(o,"CLK_PLLCON")
if ext.band(a["CLK_PLLCON"],65536)~=0 then
t=0
e="invalid <b>PLL</b> clock, PLL is in power down mode (see PLLCON[16].PD)"
else
if ext.band(a["CLK_PLLCON"],524288)~=0 then
t,e=get_OSC22M_clock(a,o)
else
t,e=get_XTL12M_clock(a,o)
end
if t~=0 then
if ext.band(a["CLK_PLLCON"],131072)~=0 then
e=string.format("<b>PLL</b> clock (<b>%sHz</b>), bypassed from %s",val2str(t),e)
else
local o={1,2,2,4}
local i=ext.band(a["CLK_PLLCON"],511)+2
local n=ext.rshift(ext.band(a["CLK_PLLCON"],15872),9)+2
local a=o[ext.rshift(ext.band(a["CLK_PLLCON"],49152),14)+1]
t=t*i/n/a
e=string.format("<b>PLL</b> clock (<b>%sHz</b>), from %s",val2str(t),e)
end
else
e="<b>PLL</b> clock from "..e
end
end
return t,e
end
function get_sys_clock(a,o,n)
table.insert(o,"CLK_CLKSEL0")
local i=ext.band(a["CLK_CLKSEL0"],7)
local e
local t
if i==0 then
e,t=get_XTL12M_clock(a,o)
elseif i==1 then
e,t=get_XTL32K_clock(a,o)
elseif i==2 then
e,t=get_PLL_clock(a,o)
elseif i==3 then
e,t=get_OSC10K_clock(a,o)
elseif i==7 then
e,t=get_OSC22M_clock(a,o)
else
e=0
t="invalid <b>"..n.."</b> clock (see CLKSEL0[2:0].HCLK_S)"
return e,t
end
if e==0 then
t="<b>"..n.."</b> clock from "..t
else
table.insert(o,"CLK_CLKDIV")
local a=ext.band(a["CLK_CLKDIV"],15)
e=e/(a+1)
t=string.format("<b>%s</b> clock (<b>%sHz</b>), from %s",n,val2str(e),t)
end
return e,t
end
function get_HCLK_clock(t,e)
return get_sys_clock(t,e,"HCLK")
end
function get_PCLK_clock(e,t)
return get_sys_clock(e,t,"PCLK")
end
function get_clk_informnation(e,t)
return reg2str("Clock setting registers",g_NUC2xx_regs,e,t)
end
function fill_NUC200_PS2(e,o,s,t,n,r,h,d)
local a=""
local t=""
local i={}
e["highlight_text"]=n
e["normal_color"]=kColor_Invalid
e["highlight_color"]=kColor_Normal
e["pin_bg_color"]=kBgColor_Normal
e["direction"]=kPinDirection_Unknown
e["status"]=kPinStatus_Unknown
table.insert(i,"CLK_APBCLK")
if ext.band(o["CLK_APBCLK"],2147483648)~=0 then
local n
local e
n,e=get_OSC22M_clock(o,i)
if n~=0 then
a="PS2 clock from "..e..".<br>"
else
t="PS2 clock is not available, "..e..".<br>"
end
else
t="PS2 clock is not available (see APBCLK[31].PS2_EN).<br>"
end
if t~=""then
t="<font color=red>"..t.."</font>"
e["pin_no_color"]=kBgColor_Error
end
if a~=""then
a="<b>Information</b><br>"..a
end
e["information"]=string.format("<b>%s</b><br>%s<br>%s%s%s",
n,
t,
get_mfp_regs(o,s,r,h,d),
get_clk_informnation(o,i),
a)
end
function fill_NUC200_ACMP(e,a,r,t,o,s,h,n)
local t=""
local i={}
e["highlight_text"]=o
e["normal_color"]=kColor_Invalid
e["highlight_color"]=kColor_CMP
e["pin_bg_color"]=kBgColor_CMP
e["direction"]=kPinDirection_In
e["status"]=kPinStatus_Unknown
table.insert(i,"CLK_APBCLK")
if ext.band(a["CLK_APBCLK"],1073741824)==0 then
t="ACMP clock is not available (see APBCLK[30].ACMP_EN).<br>"
t="<font color=red>"..t.."</font>"
e["pin_no_color"]=kBgColor_Error
end
e["information"]=string.format(
"<b>%s</b><br>%s<br>"..
"%s%s",
o,
t,
get_mfp_regs(a,r,s,h,n),
get_clk_informnation(a,i))
end
function fill_NUC200_I2S(i,t,r,e,h,u,d,l)
local e=""
local n=""
local o={}
i["highlight_text"]=h
i["normal_color"]=kColor_Invalid
i["highlight_color"]=kColor_I2S
i["pin_bg_color"]=kBgColor_I2S
i["direction"]=kPinDirection_Unknown
i["status"]=kPinStatus_Unknown
table.insert(o,"CLK_APBCLK")
if ext.band(t["CLK_APBCLK"],536870912)~=0 then
table.insert(o,"CLK_CLKSEL2")
local s=ext.band(t["CLK_CLKSEL2"],3)
local a
local i
if s==0 then
a,i=get_XTL12M_clock(t,o)
elseif s==1 then
a,i=get_PLL_clock(t,o)
elseif s==2 then
a,i=get_HCLK_clock(t,o)
else
a,i=get_OSC22M_clock(t,o)
end
if a~=0 then
table.insert(o,"I2S_I2SCLKDIV")
table.insert(o,"I2S_I2SCON")
local o=ext.band(t["I2S_I2SCON"],1)
if o~=0 then
e="I2S is enabled.<br>"
else
e="I2S is <font color=red>disabled</font>, (see I2SCON[0].I2SEN).<br>"
end
e=e..string.format("I2S clock frequency: <b>%sHz</b>, from %s.<br>",val2str(a),i)
local o=ext.band(ext.rshift(t["I2S_I2SCLKDIV"],8),255)
local t=ext.band(t["I2S_I2SCLKDIV"],7)
local i=a/(2*(o+1))
local o=a
if t~=0 then
o=a/(2*t)
end
e=e..string.format("I2S BCLK frequency: <b>%sHz</b><br>",val2str(i))
e=e..string.format("I2S MCLK frequency: <b>%sHz</b><br>",val2str(o))
else
n="I2S clock is not available, "..i..".<br>"
end
else
n="I2S clock is not available (see APBCLK[29].I2S_EN).<br>"
end
if n~=""then
n="<font color=red>"..n.."</font>"
i["pin_no_color"]=kBgColor_Error
end
if e~=""then
e="<b>Information</b><br>"..e
end
i["information"]=string.format("<b>%s</b><br>%s<br>%s%s%s",
h,
n,
get_mfp_regs(t,r,u,d,l),
get_clk_informnation(t,o),
e)
end
function fill_NUC200_UART(i,e,l,t,d,a,u,c,m)
local n=""
local t=""
local o={}
local h=0
i["highlight_text"]=d
i["normal_color"]=kColor_Invalid
i["highlight_color"]=kColor_UART
i["pin_bg_color"]=kBgColor_UART
i["direction"]=kPinDirection_Unknown
i["status"]=kPinStatus_Unknown
function get_uart_baudate(n)
local s=string.format("UART%d",a)
local t=string.format("UART%d_UA_BAUD",a)
table.insert(o,t)
local i=ext.band(e[t],536870912)
local o=ext.band(e[t],268435456)
local h=ext.rshift(ext.band(e[t],251658240),24)
local t=ext.band(e[t],65535)
local e=0
local a=""
if i==0 and o==0 then
e=n/(16*(t+2))
elseif i~=0 and o==0 then
if h>=8 then
e=n/((h+1)*(t+2))
else
a="invalid "..s.."'s UA_BAUD value, DIVIDER_X must >= 8"
end
elseif i~=0 and o~=0 then
if t>=3 then
e=n/(t+2)
else
a="invalid "..s.."'s UA_BAUD value, BRD must >= 3"
end
else
a="invalid "..s.."'s UA_BAUD value"
end
return e,a
end
table.insert(o,"CLK_APBCLK")
if ext.band(e["CLK_APBCLK"],ext.lshift(65536,a))~=0 then
table.insert(o,"CLK_CLKSEL1")
local r=ext.band(ext.rshift(e["CLK_CLKSEL1"],24),3)
local d=ext.band(ext.rshift(e["CLK_CLKDIV"],8),15)
local s
local i
if r==0 then
s,i=get_XTL12M_clock(e,o)
elseif r==1 then
s,i=get_PLL_clock(e,o)
elseif r==3 then
s,i=get_OSC22M_clock(e,o)
else
t=string.format("UART%d clock is not available (see CLKSEL1[25:24].UART_S).<br>",a)
end
if t==""then
h=s/(d+1)
if h~=0 then
table.insert(o,"CLK_CLKDIV")
n=string.format("UART%d clock frequency: <b>%sHz</b>, from %s.<br>",a,val2str(h),i)
else
t=string.format("UART%d clock is not available, %s.<br>",a,i)
end
end
else
t=string.format("UART%d clock is not available (see APBCLK[%d].UART%d_EN).<br>",
a,a+16,a)
end
if t==""then
local e,a=get_uart_baudate(h)
if e~=0 then
n=n..string.format("UART baudrate: <b>%d</b><br>",e)
else
t=a..".<br>"
end
end
if t~=""then
t="<font color=red>"..t.."</font>"
i["pin_no_color"]=kBgColor_Error
end
if n~=""then
n="<b>Information</b><br>"..n
end
i["information"]=string.format("<b>%s</b><br>%s<br>%s%s%s",
d,
t,
get_mfp_regs(e,l,u,c,m),
get_clk_informnation(e,o),
n)
end
function fill_NUC200_SPI(i,t,c,a,d,e,l,u,m)
local a=""
local n=""
local o={}
i["highlight_text"]=d
i["normal_color"]=kColor_Invalid
i["highlight_color"]=kColor_SPI
i["pin_bg_color"]=kBgColor_SPI
i["direction"]=kPinDirection_Unknown
i["status"]=kPinStatus_Unknown
table.insert(o,"CLK_APBCLK")
if ext.band(t["CLK_APBCLK"],ext.lshift(4096,e))~=0 then
local i
local s
table.insert(o,"CLK_CLKSEL1")
local h=ext.band(ext.rshift(t["CLK_CLKSEL1"],e+4),1)
if h==0 then
i,s=get_PLL_clock(t,o)
else
i,s=get_HCLK_clock(t,o)
end
if i~=0 then
local h=string.format("SPI%d_SPI_CNTRL",e)
local d=string.format("SPI%d_SPI_CNTRL2",e)
local n=string.format("SPI%d_SPI_DIVIDER",e)
table.insert(o,h)
local r=ext.band(t[h],262144)
if r~=0 then
a=string.format("SPI%d is in <b>slave</b> mode.<br>",e)
else
a=string.format("SPI%d is in <b>master</b> mode.<br>",e)
table.insert(o,n)
table.insert(o,d)
local r=ext.band(t[n],255)
local l=ext.band(ext.rshift(t[n],16),255)
local n=ext.band(t[d],2147483648)
local o=0
if n~=0 then
o=i/(r+1)
else
o=i/((r+1)*2)
end
local i=i/((l+1)*2)
local t=ext.band(t[h],8388608)
if t~=0 then
a=a..string.format("SPI%d clock frequency is variable: <b>%sHz</b> or <b>%sHz</b>, from %s.<br>",
e,val2str(o),val2str(i),s)
else
a=a..string.format("SPI%d clock frequency: <b>%sHz</b>, from %s.<br>",
e,val2str(o),s)
end
end
else
n=string.format("SPI%d clock is not available, %s.<br>",e,s)
end
else
n=string.format("SPI%d clock is not available (see APBCLK[%d].SPI%d_EN).<br>",e,e+12,e)
end
if n~=""then
n="<font color=red>"..n.."</font>"
i["pin_no_color"]=kBgColor_Error
end
if a~=""then
a="<b>Information</b><br>"..a
end
i["information"]=string.format("<b>%s</b><br>%s<br>%s%s%s",
d,
n,
get_mfp_regs(t,c,l,u,m),
get_clk_informnation(t,o),
a)
end
function fill_NUC200_SPI_IO(e,o,a,t)
local a=string.format("SPI%d_SPI_CNTRL",a)
local a=ext.band(o[a],262144)
if a==0 then
if t then
e["direction"]=kPinDirection_In
else
e["direction"]=kPinDirection_PushPullOut
end
else
if t then
e["direction"]=kPinDirection_PushPullOut
else
e["direction"]=kPinDirection_In
end
end
end
function fill_NUC200_ADC(t,e,l,a,h,u,r,d)
local i=""
local o=""
local a={}
t["highlight_text"]=h
t["normal_color"]=kColor_Invalid
t["highlight_color"]=kColor_ADC
t["pin_bg_color"]=kBgColor_ADC
t["direction"]=kPinDirection_In
t["status"]=kPinStatus_Unknown
table.insert(a,"CLK_APBCLK")
if ext.band(e["CLK_APBCLK"],268435456)~=0 then
table.insert(a,"CLK_CLKSEL1")
local s=ext.rshift(ext.band(e["CLK_CLKSEL1"],12),2)
local h=ext.rshift(ext.band(e["CLK_CLKDIV"],16711680),16)
local n
local t
if s==0 then
n,t=get_XTL12M_clock(e,a)
elseif s==1 then
n,t=get_PLL_clock(e,a)
elseif s==2 then
n,t=get_HCLK_clock(e,a)
elseif s==3 then
n,t=get_OSC22M_clock(e,a)
end
if o==""then
local e=n/(h+1)
if e~=0 then
table.insert(a,"CLK_CLKDIV")
i=string.format("ADC clock frequency: <b>%sHz</b>, from %s.<br>",val2str(e),t)
else
o="ADC clock is not available, "..t..".<br>"
end
end
else
o="ADC clock is not available (see APBCLK[28].ADC_EN).<br>"
end
if o~=""then
o="<font color=red>"..o.."</font>"
t["pin_no_color"]=kBgColor_Error
end
if i~=""then
i="<b>Information</b><br>"..i
end
t["information"]=string.format("<b>%s</b><br>%s<br>%s%s%s",
h,
o,
get_mfp_regs(e,l,u,r,d),
get_clk_informnation(e,a),
i)
end
function fill_NUC200_I2C(t,o,l,a,r,e,d,u,c)
local n=""
local a=""
local i={}
t["highlight_text"]=r
t["normal_color"]=kColor_Invalid
t["highlight_color"]=kColor_I2C
t["pin_bg_color"]=kBgColor_I2C
t["direction"]=kPinDirection_Unknown
t["status"]=kPinStatus_Unknown
table.insert(i,"CLK_APBCLK")
if ext.band(o["CLK_APBCLK"],ext.lshift(256,e))~=0 then
local t=string.format("I2C%d_I2CON",e)
local h=string.format("I2C%d_I2CLK",e)
table.insert(i,t)
local t=ext.band(o[t],64)
if t~=0 then
local t,s=get_PCLK_clock(o,i)
if t~=0 then
table.insert(i,h)
local a=ext.band(o[h],255)
local t=t/(4*(a+1))
n=string.format("I2C%d clock frequency: <b>%sHz</b>, from %s.<br>",e,val2str(t),s)
else
a=string.format("I2C%d clock is not available, %s.<br>",e,s)
end
else
a=string.format("I2C%d controller disabled (see I2C%d.I2CON[6].ENS1).<br>",e,e)
end
else
a=string.format("I2C%d clock is not available (see APBCLK[%d].I2C%d_EN).<br>",e,e+8,e)
end
if a~=""then
a="<font color=red>"..a.."</font>"
t["pin_no_color"]=kBgColor_Error
end
if n~=""then
n="<b>Information</b><br>"..n
end
t["information"]=string.format("<b>%s</b><br>%s<br>%s%s%s",
r,
a,
get_mfp_regs(o,l,d,u,c),
get_clk_informnation(o,i),
n)
end
function fill_NUC200_CLKO(o,e,d,t,r,u,c,l)
local h=get_chip_info()["series_group"]
local n=""
local a=""
local t={}
o["highlight_text"]=r
o["normal_color"]=kColor_Invalid
o["highlight_color"]=kColor_CLK
o["pin_bg_color"]=kBgColor_CLK
o["direction"]=kPinDirection_PushPullOut
o["status"]=kPinStatus_Unknown
local i=ext.band(ext.rshift(e["CLK_FRQDIV"],6),1)
if h==g_SeriesGroup.NUC2201_AE and i~=0 then
table.insert(t,"CLK_FRQDIV")
n="1Hz clock from RTC"
else
table.insert(t,"CLK_APBCLK")
if ext.band(e["CLK_APBCLK"],64)~=0 then
table.insert(t,"CLK_FRQDIV")
if ext.band(e["CLK_FRQDIV"],16)~=0 then
table.insert(t,"CLK_CLKSEL2")
local s=ext.rshift(ext.band(e["CLK_CLKSEL2"],12),2)
local r=ext.band(e["CLK_FRQDIV"],15)
local i
local o
if s==0 then
i,o=get_XTL12M_clock(e,t)
elseif s==1 then
i,o=get_XTL32K_clock(e,t)
elseif s==2 then
i,o=get_HCLK_clock(e,t)
elseif s==3 then
i,o=get_OSC22M_clock(e,t)
end
if a==""then
local t
local e=ext.band(e["CLK_FRQDIV"],32)
if(h==g_SeriesGroup.NUC200_AE or h==g_SeriesGroup.NUC2201_AE)and e~=0 then
t=i
else
t=i/ext.lshift(1,(r+1))
end
if t~=0 then
n=string.format("FRQDIV clock frequency: <b>%sHz</b>, from %s.<br>",val2str(t),o)
else
a="FRQDIV clock is not available, "..o..".<br>"
end
end
else
a="Frequency divider disabled (see FRQDIV[4].DIVIDER_EN).<br>"
end
else
a="FRQDIV clock is not available (see APBCLK[6].FDIV_EN).<br>"
end
end
if a~=""then
a="<font color=red>"..a.."</font>"
o["pin_no_color"]=kBgColor_Error
end
if n~=""then
n="<b>Information</b><br>"..n
end
o["information"]=string.format("<b>%s</b><br>%s<br>%s%s%s",
r,
a,
get_mfp_regs(e,d,u,c,l),
get_clk_informnation(e,t),
n)
end
function fill_NUC200_PWM(r,t,y,e,f,p,v,w)
local u=""
local i=""
local o={}
local a=tonumber((f:gsub("^PWM","")))
local e=ext.rshift(a,1)
local n=ext.rshift(e,1)
local m=({'PWMA','PWMB'})[1+n]
r["highlight_text"]=f
r["normal_color"]=kColor_Invalid
r["highlight_color"]=kColor_PWM
r["pin_bg_color"]=kBgColor_PWM
r["direction"]=kPinDirection_Unknown
r["status"]=kPinStatus_Unknown
table.insert(o,"CLK_APBCLK")
local d=ext.band(t["CLK_APBCLK"],ext.lshift(1048576,e))
local s
local h
if d~=0 then
local l
local c
if e==0 then
l="CLKSEL1"
c="[29:28]"
s=ext.rshift(ext.band(t["CLK_CLKSEL1"],805306368),28)
h=ext.rshift(ext.band(t["CLK_CLKSEL2"],256),8)
elseif e==1 then
l="CLKSEL1"
c="[31:30]"
s=ext.rshift(ext.band(t["CLK_CLKSEL1"],3221225472),30)
h=ext.rshift(ext.band(t["CLK_CLKSEL2"],512),9)
elseif e==2 then
l="CLKSEL2"
c="[5:4]"
s=ext.rshift(ext.band(t["CLK_CLKSEL2"],48),4)
h=ext.rshift(ext.band(t["CLK_CLKSEL2"],1024),10)
else
l="CLKSEL2"
c="[7:6]"
s=ext.rshift(ext.band(t["CLK_CLKSEL2"],192),6)
h=ext.rshift(ext.band(t["CLK_CLKSEL2"],2048),11)
end
table.insert(o,"CLK_"..l)
table.insert(o,"CLK_CLKSEL2")
local r
local d
if h==0 and s==0 then
r,d=get_XTL12M_clock(t,o)
elseif h==0 and s==1 then
r,d=get_XTL32K_clock(t,o)
elseif h==0 and s==2 then
r,d=get_HCLK_clock(t,o)
elseif h==0 and s==3 then
r,d=get_OSC22M_clock(t,o)
elseif h==1 and s==3 then
r,d=get_OSC10K_clock(t,o)
else
i=string.format("PWM%d clock is not available (see "..l..
c..".PWM%d%d_S and CLKSEL2[%d].PWM%d%d_S_E).<br>",
a,e*2,e*2+1,e+8,e*2,e*2+1)
end
if i==""then
if r==0 then
i=string.format("PWM%d clock is not available, %s.<br>",a,d)
else
local s=m.."_CSR"
local h=m.."_PPR"
table.insert(o,s)
table.insert(o,h)
local o=ext.band(ext.rshift(t[s],4*(a-4*n)),7)
local o=({2,4,8,16,1,0,0,0})[o+1]
local t=ext.band(ext.rshift(t[h],8*(e-2*n)),255)
if t==0 then
i=string.format("PWM%d counter will be stopped since %s_PPR[%d:%d].CP%d%d = 0<br>",
a,m,
8*(e-2*n)+7,
8*(e-2*n),
(e-2*n)*2,
(e-2*n)*2+1)
elseif o==0 then
i=string.format("PWM%d counter clock is not available (see %s_CSR[%d:%d].CSR%d).<br>",
a,m,
4*(a-4*n)+3,
4*(a-4*n),
(a-4*n))
else
local e=r/(t+1)
local t=e/o
u=string.format("PWM%d clock frequency: <b>%sHz</b> (Pre-Scaled), from %s.<br>"..
"PWM%d counter frequency: <b>%sHz</b><br>",
a,val2str(e),d,
a,val2str(t))
end
end
end
else
i=string.format("PWM%d clock is not available (see APBCLK[%d].PWM%d%d_EN).<br>",
a,e+20,e*2,e*2+1)
end
if i~=""then
i="<font color=red>"..i.."</font>"
r["pin_no_color"]=kBgColor_Error
end
if u~=""then
u="<b>Information</b><br>"..u
end
r["information"]=string.format("<b>%s</b><br>%s<br>%s%s%s",
f,
i,
get_mfp_regs(t,y,p,v,w),
get_clk_informnation(t,o),
u)
end
function fill_NUC200_TM(o,t,c,a,r,e,l,d,u)
local n=""
local i=""
local a={}
o["highlight_text"]=r
o["normal_color"]=kColor_Invalid
o["highlight_color"]=kColor_TM
o["pin_bg_color"]=kBgColor_TM
o["direction"]=kPinDirection_Unknown
o["status"]=kPinStatus_Unknown
table.insert(a,"CLK_APBCLK")
local h=ext.band(t["CLK_APBCLK"],ext.lshift(4,e))
local s
if h~=0 then
local o=string.format("TMR%d%d_TCSR%d",ext.rshift(e,1)*2,ext.rshift(e,1)*2+1,e)
table.insert(a,o)
local o=ext.band(t[o],16777216)
if o~=0 then
n=string.format("Timer%d external counter mode enabled.<br>",e)
else
table.insert(a,"CLK_CLKSEL1")
s=ext.band(ext.rshift(t["CLK_CLKSEL1"],8+e*4),7)
local h
local o
if s==0 then
h,o=get_XTL12M_clock(t,a)
elseif s==1 then
h,o=get_XTL32K_clock(t,a)
elseif s==2 then
h,o=get_HCLK_clock(t,a)
elseif s==3 then
n=string.format("Timer%d clock source from external trigger.<br>",e)
elseif s==5 then
h,o=get_OSC10K_clock(t,a)
elseif s==7 then
h,o=get_OSC22M_clock(t,a)
else
i=string.format("Timer%d clock source is undefined (see CLKSEL1[%d:%d].TMR%d_S).<br>",
e,8+e*4+2,8+e*4,e)
end
if i==""and n==""then
if h~=0 then
n=string.format("Timer%d clock frequency: <b>%sHz</b>, from %s.<br>",
e,val2str(h),o)
else
i=string.format("Timer%d clock is not available, %s.<br>",e,o)
end
end
end
else
i=string.format("Timer%d clock is disabled (see APBCLK[%d].TMR%d_EN).<br>",e,e+2,e)
end
if i~=""then
i="<font color=red>"..i.."</font>"
o["pin_no_color"]=kBgColor_Error
end
if n~=""then
n="<b>Information</b><br>"..n
end
o["information"]=string.format("<b>%s</b><br>%s<br>%s%s%s",
r,
i,
get_mfp_regs(t,c,l,d,u),
get_clk_informnation(t,a),
n)
end
function fill_NUC200_SC(n,t,f,a,l,e,u,c,m)
local w=get_chip_info()["series_group"]
local o=""
local i=""
local a={}
local h=0
n["highlight_text"]=l
n["normal_color"]=kColor_Invalid
n["highlight_color"]=kColor_SC
n["pin_bg_color"]=kBgColor_SC
n["direction"]=kPinDirection_PushPullOut
n["status"]=kPinStatus_Unknown
table.insert(a,"CLK_APBCLK1")
if ext.band(t["CLK_APBCLK1"],ext.lshift(1,e))~=0 then
local d=string.format("SC%d_SC_CTL",e)
table.insert(a,d)
if ext.band(t[d],1)~=0 then
table.insert(a,"CLK_CLKSEL3")
local r=ext.band(ext.rshift(t["CLK_CLKSEL3"],e*2),3)
local s
local n
if r==0 then
s,n=get_XTL12M_clock(t,a)
elseif r==1 then
s,n=get_PLL_clock(t,a)
elseif r==2 then
s,n=get_HCLK_clock(t,a)
else
s,n=get_OSC22M_clock(t,a)
end
local t=ext.band(ext.rshift(t["CLK_CLKDIV1"],e*8),255)
h=s/(t+1)
if h~=0 then
table.insert(a,"CLK_CLKDIV1")
o=string.format("SC%d clock frequency: <b>%sHz</b>, from %s.<br>",e,val2str(h),n)
else
i=string.format("SC%d clock is not available, ",e)..n..".<br>"
end
else
i=string.format("SC%d engine disable (see %s[0].SC_CEN).<br>",e,d)
end
else
i=string.format("SC%d clock is not available (see APBCLK1[%d].SC%d_EN).<br>",e,e,e)
end
if i==""then
if w==g_SeriesGroup.NUC200_AE then
local i=string.format("SC%d_SC_UACTL",e)
local n=string.format("SC%d_SC_ETUCR",e)
table.insert(a,i)
table.insert(a,n)
local a=ext.band(t[n],4095)
local a=h/(a+1)
if ext.band(t[i],1)~=0 then
o=string.format("SC%d is in <b>UART</b> mode.<br>",e)..o
..string.format("UART baudrate: <b>%d</b><br>",a)
else
o=string.format("SC%d is in <b>Smart Card</b> mode.<br>",e)..o
end
end
end
if i~=""then
i="<font color=red>"..i.."</font>"
n["pin_no_color"]=kBgColor_Error
end
if o~=""then
o="<b>Information</b><br>"..o
end
n["information"]=string.format("<b>%s</b><br>%s<br>%s%s%s",
l,
i,
get_mfp_regs(t,f,u,c,m),
get_clk_informnation(t,a),
o)
end
function fill_NUC200_USB(e,a,s)
local h=get_chip_info()["series_group"]
local i=""
local o=""
local t={}
e["highlight_text"]=s
e["normal_color"]=kColor_Invalid
e["highlight_color"]=kColor_USB
e["pin_bg_color"]=kBgColor_USB
e["direction"]=kPinDirection_Unknown
e["status"]=kPinStatus_Unknown
table.insert(t,"CLK_APBCLK")
if ext.band(a["CLK_APBCLK"],134217728)~=0 then
local n
local e
if h==g_SeriesGroup.NUC2201_AE then
table.insert(t,"CLK_CLKSEL0")
local o=ext.band(ext.rshift(a["CLK_CLKSEL0"],8),1)
if o==0 then
n,e=get_PLL_clock(a,t)
else
n,e=get_OSC48M_clock(a,t)
end
else
n,e=get_PLL_clock(a,t)
end
if n~=0 then
table.insert(t,"CLK_CLKDIV")
local t=ext.band(ext.rshift(a["CLK_CLKDIV"],4),15)
local t=n/(t+1)
i=string.format("USB clock frequency: <b>%sHz</b>, from %s.<br>",val2str(t),e)
else
o="USB clock is not available, "..e..".<br>"
end
else
o="USB clock is not available (see APBCLK[27].USBD_EN).<br>"
end
if o~=""then
o="<font color=red>"..o.."</font>"
e["pin_no_color"]=kBgColor_Error
end
if i~=""then
i="<b>Information</b><br>"..i
end
e["information"]=string.format("<b>%s</b><br>%s<br>%s%s",
s,
o,
get_clk_informnation(a,t),
i)
end
function fill_NUC200_CAN(a,e,u,o,h,t,r,d,l)
local n=""
local o=""
local i={}
a["highlight_text"]=h
a["normal_color"]=kColor_Invalid
a["highlight_color"]=kColor_CAN
a["pin_bg_color"]=kBgColor_CAN
a["status"]=kPinStatus_Unknown
function get_can_bitrate(n,a)
local t=string.format("CAN%d_CAN_BTIME",a)
local a=string.format("CAN%d_CAN_BRPE",a)
table.insert(i,t)
table.insert(i,a)
local o=ext.band(ext.rshift(e[t],8),15)
local i=ext.band(ext.rshift(e[t],12),7)
local e=
ext.bor(ext.band(e[t],63),
ext.lshift(ext.band(e[a],15),6))
local e=n/(e+1)/(o+i+3)/1000
return e
end
table.insert(i,"CLK_APBCLK")
if ext.band(e["CLK_APBCLK"],ext.lshift(16777216,t))~=0 then
local a
local s
a,s=get_PCLK_clock(e,i)
if a~=0 then
local e=get_can_bitrate(a,t)
n=string.format("CAN%d bitrate: <b>%sHz</b>, from %s.<br>",t,val2str(e),s)
else
o=string.format("CAN%d clock is not available, %s.<br>",t,s)
end
else
o=string.format("CAN%d clock is not available (see APBCLK[%d].CAN%d_EN).<br>",t,t+24,t)
end
if o~=""then
o="<font color=red>"..o.."</font>"
a["pin_no_color"]=kBgColor_Error
end
if n~=""then
n="<b>Information</b><br>"..n
end
a["information"]=string.format("<b>%s</b><br>%s<br>%s%s%s",
h,
o,
get_mfp_regs(e,u,r,d,l),
get_clk_informnation(e,i),
n)
end
function fill_NUC200_EBI(t,a,l,e,s,d,h,r)
local e=""
local o=""
local i={}
t["highlight_text"]=s
t["normal_color"]=kColor_Invalid
t["highlight_color"]=kColor_EBI
t["pin_bg_color"]=kBgColor_EBI
t["direction"]=kPinDirection_PushPullOut
t["status"]=kPinStatus_Unknown
table.insert(i,"CLK_AHBCLK")
local n=ext.band(a["CLK_AHBCLK"],8)
if n~=0 then
local t
local n
t,n=get_HCLK_clock(a,i)
if t~=0 then
table.insert(i,"EBI_EBICON")
local o=ext.band(ext.rshift(a["EBI_EBICON"],8),7)
local i=t
if o<=5 then
i=ext.rshift(t,o)
end
e=e..string.format("EBI MCLK frequency: <b>%sHz</b>, from %s<br>",
val2str(i),n)
local t=ext.band(ext.rshift(a["EBI_EBICON"],1),1)
local a=ext.band(a["EBI_EBICON"],1)
if a~=0 then
e=e..string.format("EBI Bank: address/data bus multiplex mode, and data width <b>%d-bit</b><br>",
(t~=0)and 16 or 8)
else
e=e..string.format("EBI Bank <b>disabled</b><br>")
end
else
o=string.format("EBI clock is not available, %s.<br>",n)
end
else
o="EBI clock is disabled (see AHBCLK[3].EBI_EN).<br>"
end
if o~=""then
o="<font color=red>"..o.."</font>"
t["pin_no_color"]=kBgColor_Error
end
if e~=""then
e="<b>Information</b><br>"..e
end
t["information"]=string.format("<b>%s</b><br>%s<br>%s%s%s",
s,
o,
get_mfp_regs(a,l,d,h,r),
get_clk_informnation(a,i),
e)
end
function fill_NUC200_Normal(e,s,a,o,t,n,i,r)
local h=""
e["highlight_text"]=t
e["normal_color"]=kColor_Invalid
e["highlight_color"]=kColor_Normal
e["pin_bg_color"]=kBgColor_Normal
e["direction"]=kPinDirection_Unknown
e["status"]=kPinStatus_Unknown
h=t.."<br>"
if a==nil or o==nil then
e["information"]=string.format("<b>%s</b><br>",
t)
else
e["information"]=string.format("<b>%s</b><br><br>%s",
t,
get_mfp_regs(s,a,n,i,r))
end
end
